.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.41.1.
.TH FVCTL "1" "January 2013" "FlowVisor" "FlowVisor Control program"
.SH NAME
fvctl \- commandline tool to administer FlowVisor

.SH AUTHOR

Ali Al-Shabibi <ali.al-shabibi@onlab.us>

.SH SYNOPSIS
.B fvctl
[\fIoptions\fR] \fIcommand \fR[\fIcommand_args\fR]
.SH OPTIONS
.TP
\fB\-h\fR HOST, \fB\-\-hostname\fR=\fIHOST\fR
Specify the FlowVisor host; default='localhost'
.TP
\fB\-p\fR PORT, \fB\-\-port\fR=\fIPORT\fR
Specify the FlowVisor web port; default=8080
.TP
\fB\-u\fR FV_USER, \fB\-\-user\fR=\fIFV_USER\fR
FlowVisor admin user; default='fvadmin'
.TP
\fB\-f\fR FV_PASSWDFILE, \fB\-\-passwd\-file\fR=\fIFV_PASSWDFILE\fR
Password file; default=none
.HP
\fB\-v\fR, \fB\-\-version\fR
.HP
\fB\-\-help\fR

.SH DESCRIPTION
The
.B fvctl
program is a command line tool for configuring, debugging, monitoring, and
administering running FlowVisor instances.  It is able to show the
current state of a FlowVisor, including features, configuration, and
flowspace entries.

Every FlowVisor instance runs an JSONRPC server and accepts API calls
as listed below.  The tool \fBfvctl\fR
is just a command-line client that invokes these calls.  The expectation
is that more user friendly (read: graphical) interfaces will evolve and
eventually replace \fBfvctl\fR.


.SH COMMANDS

.TP
.B add\-flowspace
Creates a flowspace rule
.TP
.B add\-slice
Creates a new slice
.TP
.B get\-config
Displays the general purpose FlowVisor config params
.TP
.B list\-datapath\-info
Displays information for a connected device
.TP
.B list\-datapath\-stats
Display statistics for a connected device
.TP
.B list\-datapaths
Displays the devices
.TP
.B list\-flowspace
Displays the flowspace
.TP
.B list\-fv\-health
Reports overall FlowVisor health
.TP
.B list\-links
Display overall topology
.TP
.B list\-slice\-health
Reports overall slice health
.TP
.B list\-slice\-info
Displays slice information
.TP
.B list\-slice\-stats
Displays statistics about a slice
.TP
.B list\-slices
Displays the configured slices
.TP
.B list\-version
Displays FlowVisor version
.TP
.B remove\-flowspace
Remove a flowspace rule
.TP
.B remove\-slice
Deletes a slice
.TP
.B save\-config
Saves Flowvisor's configuration
.TP
.B set\-config
Sets general purpose FlowVisor config parameters
.TP
.B update\-admin\-password
Update admin password
.TP
.B update\-flowspace
Changes flowspace rule parameters
.TP
.B update\-slice
Changes slice parameters
.TP
.B update\-slice\-password
Updates slice password
.TP
.B list\-datapath\-flowdb
Displays the contents of the flow db if flow tracking is enabled
.TP
.B list\-datapath\-flowrewritedb
Displays the rewrites (or expansions) FlowVisor has applied
.IP
See 'fvctl help <command>' for more info on a specific command.


.SH "MATCH SYNTAX"

Some \fBfvctl\fR commands accept an argument that describes a flow or
flows.  Such flow descriptions comprise a series
\fIfield\fB=\fIvalue\fR assignments, separated by commas.

The following field assignments describe how a flow matches a packet.
If any of these assignments is omitted from the flow syntax, the field
is treated as a wildcard; thus, if all of them are omitted, the
resulting flow matches all packets.  The string \fBall\fR or \fBany\fR
is used to specify a flow that matches all packets.

.IP \fBin_port=\fIport_no\fR
Matches physical port \fIport_no\fR.  Switch ports are numbered as
displayed by \fBfvctl\fR getDeviceInfo \fIDPID\fR.

.IP \fBdl_vlan=\fIvlan\fR
Matches IEEE 802.1q virtual LAN tag \fIvlan\fR.  Specify \fB0xffff\fR
as \fIvlan\fR to match packets that are not tagged with a virtual LAN;
otherwise, specify a number between 0 and 4095, inclusive, as the
12-bit VLAN ID to match.

.IP \fBdl_src=\fImac\fR
Matches Ethernet source address \fImac\fR, which should be specified
as 6 pairs of hexadecimal digits delimited by colons,
e.g. \fB00:0A:E4:25:6B:B0\fR.

.IP \fBdl_dst=\fImac\fR
Matches Ethernet destination address \fImac\fR.

.IP \fBdl_type=\fIethertype\fR
Matches Ethernet protocol type \fIethertype\fR, which should be
specified as a integer between 0 and 65535, inclusive, either in
decimal or as a hexadecimal number prefixed by \fB0x\fR,
e.g. \fB0x0806\fR to match ARP packets.

.IP \fBnw_src=\fIip\fR[\fB/\fInetmask\fR]
Matches IPv4 source address \fIip\fR, which should be specified as an
IP address, e.g. \fB192.168.1.1\fR.  The optional \fInetmask\fR allows matching
only on an IPv4 address prefix.  The netmask is specificed "CIDR-style", i.e.,
\fB192.168.1.0/24\fR.

.IP \fBnw_dst=\fIip\fR[\fB/\fInetmask\fR]
Matches IPv4 destination address \fIip\fR.

.IP \fBnw_proto=\fIproto\fR
Matches IP protocol type \fIproto\fR, which should be specified as a
decimal number between 0 and 255, inclusive, e.g. 6 to match TCP
packets.

.IP \fBnw_tos=\fItos/dscp\fR
Matches ToS/DSCP (only 6-bits, not modify reserved 2-bits for future
use) field of IPv4 header \fItos/dscp\fR, which should be specified as
a decimal number between 0 and 255, inclusive.

.IP \fBtp_src=\fIport\fR
Matches transport-layer (e.g., TCP, UDP, ICMP) source port \fIport\fR,
which should be specified as a decimal number between 0 and 65535 (in
the case of TCP or UDP) or between 0 and 255 (in the case of ICMP),
inclusive, e.g. 80 to match packets originating from a HTTP server.

.IP \fBtp_dst=\fIport\fR
Matches transport-layer destination port \fIport\fR.

.SH DPID
The datapath identifier (DPID) is a unique ID to name and identify
OpenFlow devices.  With fvctl, DPIDs are 8 bytes and can be specified as a decimal
number or as 8 hex octets, e.g., 00:00:00:23:10:35:ce:a5.  The DPID
ff:ff:ff:ff:ff:ff:ff is a "wildcard" DPID that matches all DPIDs.
It can be specified using any of the following short cuts: \fBall\fR, \fBany\fR,
or \fBALL_DPIDS\fR.

.SH SLICE-PERM
Slice actions is a comma separated list of slices that have control
over a specific FlowSpace.
Slice actions are of the form "\fIslicename1\fR=\fIperm\fR[\fIslicename2\fR=\fIperm\fR[...]]".
Each slice can have three types of permissions over a flowspace: \fBDELEGATE\fR, \fBREAD\fR, and \fBWRITE\fR.
Permissions are \fIcurrently\fR a bitmask specified as an integer, with DELEGATE=1, READ=2, WRITE=4.  So,
"alice=5,bob=2" would give Alice's slice DELEGATE and WRITE permissions (1+4=5), but Bob only READ permissions.
Improving this interface is on the TODO list.  For example,

 \fIfvctl add-flowspace myflowspace all 2 any slice1=4,slice2=2\fR

.TP
.B DELEGATE
A slice can delegate control of this flowspace to another slice.  It also has permissions to un-delegate/reclaim
the flowspace.

.TP
.B READ
A slice receives packet_in's matching this flow entry, can send LLDP messages and stats to switches in this flow entry,
but cannot write to or change the switch's flow table.  This is useful for implementing a monitoring slice.

.TP
.B WRITE
A slice has all of the permissions of READ but can also write to the
flow table if the flow_mod matches this flow entry.  FlowVisor will
try to rewrite a flow_mod (if necessary) as the logical intersection
of a slice's flow_mod and the union of its FlowSpace.

.BR flowvisor (8),
.BR fvconfig (1),
 
